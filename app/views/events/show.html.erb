<!-- app/views/events/show.html.erb -->
<div class="container">
  <h1><%= @event.name %></h1>
  <p>Date: <%= @event.date.strftime('%B %d, %Y') %></p>
  <p>Location: <%= @event.location %></p>
  <p>Created by: <%= @event.creator.email %></p>

  <% if @attendees.any? %>
    <h3>Attendees:</h3>
    <ul>
      <% @attendees.each do |attendee| %>
        <li><%= attendee.email %></li>
      <% end %>
    </ul>
  <% else %>
    <p>No attendees yet.</p>
  <% end %>

  <% if user_signed_in? %>
    <% if @event.attendees.include?(current_user) %>
      <%= button_to 'Unattend', unattend_event_path(@event), method: :delete, class: "btn btn-danger" %>
    <% else %>
      <%= button_to 'Attend', attend_event_path(@event), method: :post, class: "btn btn-success" %>
    <% end %>
  <% else %>
    <p><%= link_to 'Sign in', new_user_session_path %> to RSVP to this event.</p>
  <% end %>

</div>
